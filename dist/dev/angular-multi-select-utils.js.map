{"version":3,"sources":["../../src/angular-multi-select-utils.js"],"names":[],"mappings":"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","file":"angular-multi-select-utils.js","sourcesContent":["var angular_multi_select_utils = angular.module('angular-multi-select-utils', [\n\t'angular-multi-select-constants'\n]);\n\nangular_multi_select_utils.factory('angularMultiSelectUtils', [\n\t'angularMultiSelectConstants',\n\tfunction (angularMultiSelectConstants) {\n\t\tvar Utils = function () {\n\n\t\t};\n\n\t\t/*\n\t\t███████  █████  ███    ██ ██ ████████ ██ ███████ ███████      ██████  ██████  ███████\n\t\t██      ██   ██ ████   ██ ██    ██    ██    ███  ██          ██    ██ ██   ██ ██\n\t\t███████ ███████ ██ ██  ██ ██    ██    ██   ███   █████       ██    ██ ██████  ███████\n\t\t     ██ ██   ██ ██  ██ ██ ██    ██    ██  ███    ██          ██    ██ ██           ██\n\t\t███████ ██   ██ ██   ████ ██    ██    ██ ███████ ███████      ██████  ██      ███████\n\t\t*/\n\t\tUtils.prototype.sanitize_ops = function (ops) {\n\t\t\t/*\n\t\t\t * This will set all basic and required values to\n\t\t\t * \"sane\" defaults if none are provided.\n\t\t\t */\n\t\t\tops = ops || {};\n\n\t\t\treturn {\n\t\t\t\tDEBUG             : ops.DEBUG             || false,\n\t\t\t\tNAME              : ops.NAME              || 'angular-multi-select-' + Math.round(Date.now() / 1000) + '' + Math.random(),\n\t\t\t\tMAX_CHECKED_LEAFS : ops.MAX_CHECKED_LEAFS || -1,\n\n\t\t\t\tID_PROPERTY       : ops.ID_PROPERTY       || angularMultiSelectConstants.ID_PROPERTY,\n\t\t\t\tOPEN_PROPERTY     : ops.OPEN_PROPERTY     || angularMultiSelectConstants.OPEN_PROPERTY,\n\t\t\t\tCHECKED_PROPERTY  : ops.CHECKED_PROPERTY  || angularMultiSelectConstants.CHECKED_PROPERTY,\n\t\t\t\tCHILDREN_PROPERTY : ops.CHILDREN_PROPERTY || angularMultiSelectConstants.CHILDREN_PROPERTY\n\t\t\t};\n\t\t};\n\n\t\t/*\n\t\t █████  ██████  ██████   █████  ██    ██     ███████ ██████   ██████  ███    ███      █████  ████████ ████████ ██████\n\t\t██   ██ ██   ██ ██   ██ ██   ██  ██  ██      ██      ██   ██ ██    ██ ████  ████     ██   ██    ██       ██    ██   ██\n\t\t███████ ██████  ██████  ███████   ████       █████   ██████  ██    ██ ██ ████ ██     ███████    ██       ██    ██████\n\t\t██   ██ ██   ██ ██   ██ ██   ██    ██        ██      ██   ██ ██    ██ ██  ██  ██     ██   ██    ██       ██    ██   ██\n\t\t██   ██ ██   ██ ██   ██ ██   ██    ██        ██      ██   ██  ██████  ██      ██     ██   ██    ██       ██    ██   ██\n\t\t*/\n\t\tUtils.prototype.array_from_attr = function (str) {\n\t\t\t/*\n\t\t\t * This will take a string and try to split it\n\t\t\t * using ',' as separator and return the resulting\n\t\t\t * array or undefined.\n\t\t\t */\n\t\t\tif (typeof(str) === 'string') {\n\t\t\t\treturn str.split(\",\")\n\t\t\t\t.map(s => s.replace(/^\\s+|\\s+$/g, ''));\n\t\t\t} else {\n\t\t\t\treturn str;\n\t\t\t}\n\t\t};\n\n\t\t/*\n\t\t███████ ██      ███████ ███    ███ ███████ ███    ██ ████████     ██████  ███████ ██       ██████  ███    ██  ██████  ███████     ████████  ██████      ██████  ██ ██████  ███████  ██████ ████████ ██ ██    ██ ███████\n\t\t██      ██      ██      ████  ████ ██      ████   ██    ██        ██   ██ ██      ██      ██    ██ ████   ██ ██       ██             ██    ██    ██     ██   ██ ██ ██   ██ ██      ██         ██    ██ ██    ██ ██\n\t\t█████   ██      █████   ██ ████ ██ █████   ██ ██  ██    ██        ██████  █████   ██      ██    ██ ██ ██  ██ ██   ███ ███████        ██    ██    ██     ██   ██ ██ ██████  █████   ██         ██    ██ ██    ██ █████\n\t\t██      ██      ██      ██  ██  ██ ██      ██  ██ ██    ██        ██   ██ ██      ██      ██    ██ ██  ██ ██ ██    ██      ██        ██    ██    ██     ██   ██ ██ ██   ██ ██      ██         ██    ██  ██  ██  ██\n\t\t███████ ███████ ███████ ██      ██ ███████ ██   ████    ██        ██████  ███████ ███████  ██████  ██   ████  ██████  ███████        ██     ██████      ██████  ██ ██   ██ ███████  ██████    ██    ██   ████   ███████\n\t\t*/\n\t\tUtils.prototype.element_belongs_to_directive = function (element, directive_name) {\n\t\t\t/*\n\t\t\t * Check if the passed DOM element is somewhere inside the DOM tree of the\n\t\t\t * directive identified by directive_name.\n\t\t\t */\n\t\t\tvar res = false;\n\n\t\t\tvar p = angular.element(element).parent();\n\t\t\twhile (p.length > 0) {\n\t\t\t\tif (p.attr(\"name\") === directive_name) {\n\t\t\t\t\tres = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tp = p.parent();\n\t\t\t}\n\n\t\t\treturn res;\n\t\t};\n\n\t\tUtils.prototype.prevent_scroll_bubbling = function (element) {\n\t\t\telement.addEventListener('mousewheel', function(e) {\n\t\t\t\tif (element.clientHeight + element.scrollTop + e.deltaY >= element.scrollHeight) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\telement.scrollTop = element.scrollHeight;\n\t\t\t\t} else if (element.scrollTop + e.deltaY <= 0) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\telement.scrollTop = 0;\n\t\t\t\t}\n\t\t\t}, false);\n\t\t};\n\n\t\t/*\n\t\t██████  ██████   ██████   ██████ ███████ ███████ ███████     ██   ██ ██████      ██ ███    ██ ██████  ██    ██ ████████\n\t\t██   ██ ██   ██ ██    ██ ██      ██      ██      ██          ██  ██  ██   ██     ██ ████   ██ ██   ██ ██    ██    ██\n\t\t██████  ██████  ██    ██ ██      █████   ███████ ███████     █████   ██████      ██ ██ ██  ██ ██████  ██    ██    ██\n\t\t██      ██   ██ ██    ██ ██      ██           ██      ██     ██  ██  ██   ██     ██ ██  ██ ██ ██      ██    ██    ██\n\t\t██      ██   ██  ██████   ██████ ███████ ███████ ███████     ██   ██ ██████      ██ ██   ████ ██       ██████     ██\n\t\t*/\n\t\tUtils.prototype.process_kb_input = function (event, $scope) {\n\t\t\t/*\n\t\t\t * Kb events handler. React as follows based on key code:\n\t\t\t *\n\t\t\t * * escape - close the opened AMS instance.\n\t\t\t * * spacebar - toggle the open state of the focused item.\n\t\t\t * * keyup - focus the previos item, or if at the top, the last one.\n\t\t\t * * keydown - focus the next item, or if at the bottom, the first one.\n\t\t\t *\n\t\t\t * The is an exception in keyup/keydown handlers. Both should \"skip\"\n\t\t\t * one key hit in order to allow an \"empty\" focus.\n\t\t\t */\n\t\t\tvar quit = true;\n\n\t\t\tvar code = event.keyCode ? event.keyCode : event.which;\n\t\t\tswitch (code) {\n\t\t\t\tcase 27: //escape\n\t\t\t\t\t$scope.open = false;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 32: //spacebar\n\t\t\t\t\tvar item = $scope.items[$scope.focused_index];\n\t\t\t\t\tif (item !== undefined) {\n\t\t\t\t\t\t$scope.amse.toggle_open_node(item);\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 38: //keyup\n\t\t\t\t\t$scope.focused_index = $scope.focused_index === -1 ? $scope.items.length - 1 : $scope.focused_index - 1;\n\t\t\t\t\tquit = false;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 40: //keydown\n\t\t\t\t\t$scope.focused_index = $scope.focused_index + 1 > $scope.items.length ? 0 : $scope.focused_index + 1;\n\t\t\t\t\tquit = false;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t//Nothing to do here...\n\t\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$scope.$apply();\n\n\t\t\treturn quit;\n\t\t};\n\n\t\t/*\n\t\t███████  ██████ ██████   ██████  ██      ██          ████████  ██████      ██ ████████ ███████ ███    ███\n\t\t██      ██      ██   ██ ██    ██ ██      ██             ██    ██    ██     ██    ██    ██      ████  ████\n\t\t███████ ██      ██████  ██    ██ ██      ██             ██    ██    ██     ██    ██    █████   ██ ████ ██\n\t\t     ██ ██      ██   ██ ██    ██ ██      ██             ██    ██    ██     ██    ██    ██      ██  ██  ██\n\t\t███████  ██████ ██   ██  ██████  ███████ ███████        ██     ██████      ██    ██    ███████ ██      ██\n\t\t*/\n\t\tUtils.prototype.scroll_to_item = function (element) {\n\t\t\t/*\n\t\t\t * Change the scroll position of the items container in such a way that\n\t\t\t * the focused item gets to be visible.\n\t\t\t */\n\t\t\tvar item = element[0].getElementsByClassName('ams-item-focused')[0];\n\t\t\tif (item === undefined) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar container = element[0].getElementsByClassName('ams-items')[0];\n\t\t\tcontainer.scrollTop = item.offsetTop + item.offsetHeight - container.offsetHeight;\n\t\t};\n\n\t\treturn Utils;\n\t}\n]);\n"]}